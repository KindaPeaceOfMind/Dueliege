<!DOCTYPE html>
<head>
    <link href="style/login.css" rel="stylesheet">
</head>
<body>
<div class="body">
    <div></div>
    <div class="block">
        <h2>Регистрация</h2>
        <div>Логин:</div>
        <input type="text" id="login" name="login" size="10"><br><br>
        <div>Пароль:</div>
        <input type="password" id="password" name="password" size="10"><br><br>
        <button onclick="authorization()">Зарегестрироваться</button>
    </div>
    <div class="block">
        <h2>Авторизация</h2>
        <div>Логин:</div>
        <input type="text" id="login" name="login" size="10"><br><br>
        <div>Пароль:</div>
        <input type="password" id="password" name="password" size="10"><br><br>
        <button onclick="authorization()">Войти</button>
    </div>
    <div></div>
</div>
<div class="body2">
<p class="block"><a href="https://vk.com/radikc2003" style="text-decoration:none;">Создатель этого действа в VK</a></p>
</div>
<script>
    async function authorization(){
        let login = event.target.parentNode.childNodes[5].value;
        let password = event.target.parentNode.childNodes[11].value;

        let user = {login:login, password:password};

        let response = await fetch('/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json;charset=utf-8'
            },
            body: JSON.stringify(user)
        });

        let result = await response.json();
        if (result[0]==true){
            document.cookie = "token ="+result[1];
            document.location.replace('/start');
        }else{
            alert(result[1])
        }
    }
</script>
</body>